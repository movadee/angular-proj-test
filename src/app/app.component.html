<!--
  Main table container with scroll popup integration

  This template displays a data table with the following features:
  - Responsive table layout with sticky header
  - Scrollable content area
  - Status badges with dynamic styling
  - Integrated scroll popup that appears during scrolling

  The scroll popup is positioned outside the scrollable wrapper
  to appear to the right of the scrollbar.
-->

<!--
  Table Wrapper
  This div creates the scrollable container for the table content.
  The ScrollPopupService listens to scroll events on this element
  to determine when to show/hide the popup and calculate positioning.
-->
<div class="table-wrapper">
  <!--
    Data Table
    Displays the tabular data with proper semantic structure.
    Uses Angular's @for directive for efficient rendering of table rows.
  -->
  <table class="data-table">
    <!--
      Sticky Header
      The table header remains visible at the top while scrolling,
      providing context for the data being viewed.
    -->
    <thead class="sticky-header">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Department</th>
        <th>Date</th>
        <th>Status</th>
      </tr>
    </thead>

    <!--
      Table Body
      Contains the actual data rows, each representing a record
      from the tableData array.
    -->
    <tbody>
      <!--
        Dynamic Row Generation
        Each row gets a unique data attribute for potential future enhancements.
      -->
      @for (item of tableData; track item.id; let i = $index) {
        <tr [attr.data-row-index]="i">
          <td>{{ item.id }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.email }}</td>
          <td>{{ item.department }}</td>
          <!--
            Date Column with data-date attribute
            The ScrollPopupService reads this attribute to get the date value
            for positioning the popup based on the first visible row's date.
          -->
          <td [attr.data-date]="item.date">{{ item.date }}</td>
          <td>
            <!--
              Status Badge
              Dynamic styling based on status value.
              Uses CSS classes to apply different colors for different statuses.
            -->
            <span class="status-badge" [class]="'status-' + item.status.toLowerCase()">
              {{ item.status }}
            </span>
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>

<!--
  Scroll Popup Component

  This component is positioned outside the scrollable wrapper to appear
  to the right of the scrollbar. It will:
  - Show when the user starts scrolling in the table
  - Position itself aligned with the scrollbar thumb
  - Display month/year information (configurable)
  - Automatically hide after scrolling stops

  The component is self-contained and manages its own positioning
  through the ScrollPopupService.
-->
<app-scroll-popup></app-scroll-popup>
